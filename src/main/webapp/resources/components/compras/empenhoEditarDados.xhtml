<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:mcl="http://java.sun.com/jsf/composite/components/mcl">

<!-- INTERFACE -->
<composite:interface>
	<composite:attribute name="managedBean" required="true" />
	<composite:attribute name="readonly" type="java.lang.Boolean" />
</composite:interface>

<!-- IMPLEMENTATION -->
<composite:implementation>
	<h:form id="empenhoForm" class="smart-form" acceptcharset="ISO-8859-1">
		<fieldset>
			<p:panel header="Dados do Fornecedor">
				<div class="row">
					<section class="col col-3">
						<p:outputLabel value="Código" styleClass="label" />
						<label class="input">
							<p:inputText value="#{cc.attrs.managedBean.empenho.fornecedorCodigo}" readonly="true" />
						</label>
					</section>
					<section class="col col-3">
						<p:outputLabel value="Documento" styleClass="label" />
						<label class="input">
							<p:inputText value="#{cc.attrs.managedBean.empenho.fornecedorNumeroDocumento}" readonly="true" />
						</label>
					</section>
					<section class="col col-6">
						<p:outputLabel value="Razão Social" styleClass="label" />
						<label class="input">
							<p:inputText value="#{cc.attrs.managedBean.empenho.fornecedorRazaoSocial}" readonly="true" />
						</label>
					</section>
				</div>
			</p:panel>
			<br/>
			<p:panel header="Dados do Processo">
				<div class="row">
					<section class="col col-3">
						<p:outputLabel value="Número / Ano" styleClass="label" />
						<label class="input">
							<p:inputText value="#{cc.attrs.managedBean.empenho.processo.numero} / #{cc.attrs.managedBean.empenho.processo.ano}" readonly="true" />
						</label>
					</section>
					<section class="col col-3">
						<p:outputLabel value="Modalidade" styleClass="label" />
						<label class="input">
							<p:inputText id="modalidade" value="#{cc.attrs.managedBean.empenho.processo.modalidade.descricao}
							- #{cc.attrs.managedBean.empenho.processo.numeroLicitacao} / #{cc.attrs.managedBean.empenho.processo.anoLicitacao}" readonly="true" />
						</label>
					</section>
					<section class="col col-3">
						<p:outputLabel value="Regime de Contratação" styleClass="label" />
						<label class="input">
							<p:inputText value="#{cc.attrs.managedBean.empenho.processo.regimeContratacao.descricao}" readonly="true" />
						</label>
					</section>
					<section class="col col-3">
						<mcl:money label="Valor do Processo" value="#{cc.attrs.managedBean.empenho.processo.valor}" readonly="true" />
					</section>
				</div>
			</p:panel>
			<br/>
			<p:panel header="Dados do Empenho">
				<div class="row">
					<section class="col col-3">
						<p:outputLabel value="Tipo Empenho" styleClass="label" />
						<label class="input">
							<p:inputText value="#{cc.attrs.managedBean.empenho.tipoEmpenho.descricao}" readonly="true" />
						</label>
					</section>
					<section class="col col-3">
						<p:outputLabel value="Número" styleClass="label" />
						<label class="input">
							<p:inputText value="#{cc.attrs.managedBean.empenho.numero}" readonly="true" />
						</label>
					</section>
					<section class="col col-3">
						<p:outputLabel value="Ano" styleClass="label" />
						<label class="input">
							<p:inputText value="#{cc.attrs.managedBean.empenho.processo.ano}" readonly="true" />
						</label>
					</section>
					<section class="col col-3">
						<p:outputLabel value="Data" styleClass="label" />
						<label class="input">
							<p:inputText value="#{cc.attrs.managedBean.empenho.data}" readonly="true">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</p:inputText>
						</label>
					</section>
				</div>
				<section>
					<p:outputLabel value="Descrição" styleClass="label" />
					<label class="input">
						<p:inputText value="#{cc.attrs.managedBean.empenho.descricao}" readonly="true" />
					</label>
				</section>
				<div class="row">
					<section class="col col-3">
						<p:outputLabel value="Dotação Número" styleClass="label" />
						<label class="input">
							<p:inputText value="#{cc.attrs.managedBean.empenho.dotacaoNumero}" readonly="true" />
						</label>
					</section>
					<section class="col col-3">
						<p:outputLabel value="Dotação CND" styleClass="label" />
						<label class="input">
							<p:inputText value="#{cc.attrs.managedBean.empenho.dotacaoCnd} " readonly="true" />
						</label>
					</section>
					<section class="col col-3">
						<mcl:money label="Valor" value="#{cc.attrs.managedBean.empenho.valor}" readonly="true" />
					</section>
				</div>
				<div class="row">
					<section class="col col-3">
						<mcl:money label="Valor Total Estornado" value="#{cc.attrs.managedBean.empenho.valorTotalEstornado}" readonly="true" />
					</section>
					<section class="col col-3">
						<mcl:money label="Valor Total Liquidado" value="#{cc.attrs.managedBean.empenho.valorTotalLiquidado}" readonly="true" />
					</section>
					<section class="col col-3">
						<mcl:money label="Valor Total AF" value="#{cc.attrs.managedBean.empenho.valorTotalAf}" readonly="true" />
					</section>
					<section class="col col-3">
						<mcl:money label="Valor Disponível AF" value="#{cc.attrs.managedBean.empenho.valorDisponivelAf}" readonly="true" />
					</section>
				</div>
				
					<p:panel id="pncpEmpenhos" header="Dados para Edição">
						<div class="row">
						
							<section class="col col-4" style="margin-top:20px">
								<p:outputLabel for="pncpEmpenhoDataAssinatura" value="Data Assinatura" styleClass="label" />
								<label class="input">
									<p:calendar id="pncpEmpenhoDataAssinatura" required="#{cc.attrs.managedBean.empenho.processo.regimeContratacao eq 'LEI_14133' and !cc.attrs.managedBean.empenho.processo.formalizarContrato}" style="float:left"
												value="#{cc.attrs.managedBean.pncpDataAssinatura}" 
												pattern="dd/MM/yyyy"
												disabled="#{cc.attrs.readonly}"
												mask="true"
												locale="pt" />
								</label>
							</section>
							<section class="col col-4" style="margin-top:20px">
								<p:outputLabel for="pncpDataVigenciaInicio" value="Data Vigência Inicial" styleClass="label" />
								<label class="input">
									<p:calendar id="pncpDataVigenciaInicio" required="true" style="float:left"
												value="#{cc.attrs.managedBean.empenho.pncpDataVigenciaInicio}" 
												pattern="dd/MM/yyyy"
												mask="true"
												locale="pt" />
								</label>
							</section>
							<section class="col col-4" style="margin-top:20px">
								<p:outputLabel for="pncpDataVigenciaFim" value="Data Vigência Final" styleClass="label" />
								<label class="input">
									<p:calendar id="pncpDataVigenciaFim" required="true" style="float:left"
												value="#{cc.attrs.managedBean.empenho.pncpDataVigenciaFim}" 
												pattern="dd/MM/yyyy"
												mask="true"
												locale="pt"  />
								</label>
							</section>
						</div>
						<div class="row">
							<section class="col col-4">
								<mcl:money label="Valor" value="#{cc.attrs.managedBean.empenho.valor}" readonly="true" />
							</section>
							<p:outputPanel id="pncpNumeroParcelaPanel">
								<section class="col col-4">
									<mcl:number label="Número de Parcelas" value="#{cc.attrs.managedBean.empenho.pncpNumeroParcelas}"
										required="true" 
										ajax="true" 
										global="false" 
										listener="#{cc.attrs.managedBean.calcularValorParcela()}" 
										update="empenhoEditarDados:empenhoForm:pncpValorParcelaPanel" />
								</section>
							</p:outputPanel>
							<p:outputPanel id="pncpValorParcelaPanel">
								<section class="col col-4">
									<mcl:money label="Valor da Parcela" id="pncpValorParcela" value="#{cc.attrs.managedBean.empenho.pncpValorParcela}" decimalPlaces="4" readonly="true" />
								</section>
							</p:outputPanel>
						</div>
						
						<div class="row">
						
							<h:panelGroup id="panelPncpJustificativa">
								<section jsf:rendered="#{cc.attrs.managedBean.empenho.pncpLocation ne null}" style="padding:15px">
									<p:outputLabel for="pncpJustificativa" value="Justificativa para retificação" styleClass="label" />
									<label class="input">
										<p:inputTextarea id="pncpJustificativa" value="#{cc.attrs.managedBean.empenho.pncpJustificativa}" 
										required="true" rows="3" counter="display" maxlength="255" counterTemplate="{0} restantes." autoResize="false"/><br />
										<h:outputText id="display" />
									</label>
								</section>
							</h:panelGroup>			
						
						</div>
						
						
						
						
					</p:panel>
			</p:panel>
		</fieldset>
			
	
		<footer>
		
            <h:commandLink value="" action="#{cc.attrs.managedBean.voltar()}" styleClass="btn btn-primary btn-lg pull-left"
            	immediate="true">
            	<i class="fa fa-arrow-left"></i>
            	<h:outputText value="  Voltar" />
            </h:commandLink>
            
            
			<h:commandLink value="" action="#{cc.attrs.managedBean.salvar()}" styleClass="btn btn-success btn-lg"
				title="Salva a edição do Empenho"
				 onclick="$('.btn-danger').attr('disabled', true);">
            	<i class="fa fa-save"></i>
            	<h:outputText value="  Salvar" />
            </h:commandLink>
            
            
		</footer>
	</h:form>
	
</composite:implementation>

</html>	